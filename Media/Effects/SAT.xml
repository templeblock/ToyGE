<?xml version='1.0'?>

<effect>
  <include name='PostProcess.xml'/>

  <variable type='cbuffer' name='cb'>
    <variable type='int4' name='offset'/>
  </variable>

  <variable type='Texture2D' name='inTex'/>
  
  <variable type='SamplerState' name='samPoint'>
    <state name='filter' value='MIN_MAG_MIP_POINT'/>
    <state name='addressU' value='BORDER'/>
    <state name='addressV' value='BORDER'/>
    <state name='borderColor' value='0.0 0.0 0.0 0.0'/>
  </variable>
  
  <shader>
    <![CDATA[

float4 SATPS_Horz(PostProcessVSOut vsOut) : SV_TARGET
{
  float2 texelSize = 1.0f / inTex.Length.xy;
  return inTex.SampleLevel(samPoint, vsOut.tex, 0)
       + inTex.SampleLevel(samPoint, vsOut.tex - float2(offset.x, 0.0f) * texelSize, 0);
}

float4 SATPS_Vert(PostProcessVSOut vsOut) : SV_TARGET
{
  float2 texelSize = 1.0f / inTex.Length.xy;
  return inTex.SampleLevel(samPoint, vsOut.tex, 0)
       + inTex.SampleLevel(samPoint, vsOut.tex - float2(0.0f, offset.x) * texelSize, 0);
}
    ]]>
  </shader>

  <technique name='SAT_Horz'>
    <pass>
      <vs entry='PostProcessVS'/>
      <ps entry='SATPS_Horz'/>
    </pass>
  </technique>

  <technique name='SAT_Vert'>
    <pass>
      <vs entry='PostProcessVS'/>
      <ps entry='SATPS_Vert'/>
    </pass>
  </technique>
  
</effect>