<?xml version="1.0" encoding="utf-8"?>

<effect>
  <include name="PostProcess.xml"/>
  <include name="CommonState.xml"/>

  <variable type="Texture2D" name="renderTex"/>

  <variable type="cbuffer" name="cb_widgetRender">
    <variable type="float4" name="color"/>
  </variable>
  
  <shader>
    <![CDATA[
    
float4 RenderPanelPS(PostProcessVSOut vsOut) : SV_TARGET
{
  float4 outColor = color;
#ifdef RENDER_TEX
  outColor *= renderTex.Sample(samplerLinearClamp, vsOut.tex);
#endif
  
  return outColor;
}
    
    ]]>
  </shader>

  <variable type='BlendState' name='alphaBlend'>
    <state name="blendRTDesc" index="0">
      <state name="blendEnable" value="true"/>
      <state name="srcBlend" value="SRC_ALPHA"/>
      <state name="dstBlend" value="INV_SRC_ALPHA"/>
      <state name="dstBlendAlpha" value="ZERO"/>
    </state>
  </variable>

  <technique name="RenderPanel">
    <pass>
      <state value="disableDepth"/>
      <state value="alphaBlend"/>
      <vs entry="PostProcessVS"/>
      <ps entry="RenderPanelPS"/>
    </pass>
  </technique>

  <technique name="RenderPanelTex">
    <pass>
      <macro name="RENDER_TEX"/>
      <state value="disableDepth"/>
      <state value="alphaBlend"/>
      <vs entry="PostProcessVS"/>
      <ps entry="RenderPanelPS"/>
    </pass>
  </technique>
  
</effect>
