SET(LIB_NAME ToyGE_RenderEngine_D3D11)
ADD_DEFINITIONS(-DTOYGE_D3D11RE_SOURCE)


FILE(GLOB HEADER_FILES ${PLUGINS_RENDERENGINE_DIR}/ToyGE_RenderEngine_D3D11/include/ToyGE/D3D11/*.h)
FILE(GLOB SOURCE_FILES ${PLUGINS_RENDERENGINE_DIR}/ToyGE_RenderEngine_D3D11/src/*.cpp)

SOURCE_GROUP("Header Files" FILES ${HEADER_FILES})
SOURCE_GROUP("Source Files" FILES ${SOURCE_FILES})

#Include
INCLUDE_DIRECTORIES(${TOYGE_ROOT_DIR}/Core/include)
INCLUDE_DIRECTORIES(${PLUGINS_RENDERENGINE_DIR}/ToyGE_RenderEngine_D3D11/include)
INCLUDE_DIRECTORIES(${ANTTWEAKBAR_DIR}/include)
INCLUDE_DIRECTORIES(${BOOST_DIR}/)

#Libs
LINK_DIRECTORIES(${ANTTWEAKBAR_DIR}/lib/)

IF(TARGET_64)
	SET(LINKED_LIBARARIES ${LINKED_LIBARARIES} AntTweakBar64)
	
ELSE()
	SET(LINKED_LIBARARIES ${LINKED_LIBARARIES} AntTweakBar)
ENDIF()

#GenerateLib
ADD_LIBRARY(${LIB_NAME} SHARED
	${HEADER_FILES} ${SOURCE_FILES})

TARGET_LINK_LIBRARIES(${LIB_NAME}
	PRIVATE ${LINKED_LIBARARIES}
	PRIVATE ${TOYGE_CORE_LIB_NAME})

#Properties
SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES
	PROJECT_LABEL ${LIB_NAME})

SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES
	FOLDER RenderEngine)

SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES
	ARCHIVE_OUTPUT_DIRECTORY ${TOYGE_LIB_DIR}/${PLATFORM_TARGET}/
	ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${TOYGE_LIB_DIR}/${PLATFORM_TARGET}/Debug/
	ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${TOYGE_LIB_DIR}/${PLATFORM_TARGET}/Release/
	OUTPUT_NAME ${LIB_NAME})

SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES
	RUNTIME_OUTPUT_DIRECTORY ${TOYGE_LIB_DIR}/${PLATFORM_TARGET}/
	RUNTIME_OUTPUT_DIRECTORY_DEBUG ${TOYGE_LIB_DIR}/${PLATFORM_TARGET}/Debug/
	RUNTIME_OUTPUT_DIRECTORY_RELEASE ${TOYGE_LIB_DIR}/${PLATFORM_TARGET}/Release/
	OUTPUT_NAME ${LIB_NAME})

SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES
	LIBRARY_OUTPUT_DIRECTORY ${TOYGE_LIB_DIR}/${PLATFORM_TARGET}/
	LIBRARY_OUTPUT_DIRECTORY_DEBUG ${TOYGE_LIB_DIR}/${PLATFORM_TARGET}/Debug/
	LIBRARY_OUTPUT_DIRECTORY_RELEASE ${TOYGE_LIB_DIR}/${PLATFORM_TARGET}/Release/
	OUTPUT_NAME ${LIB_NAME})

ADD_CUSTOM_COMMAND(TARGET ${LIB_NAME} 
	POST_BUILD
	COMMAND ${CMAKE_COMMAND} -E make_directory ${TOYGE_BIN_DIR}/${PLATFORM_TARGET}/${BUILD_CONFIG}/ 
	COMMAND ${CMAKE_COMMAND} -E copy 
	${TOYGE_LIB_DIR}/${PLATFORM_TARGET}/${BUILD_CONFIG}/${LIB_NAME}${DLL_SUFFIX}
	${TOYGE_BIN_DIR}/${PLATFORM_TARGET}/${BUILD_CONFIG}/${LIB_NAME}${DLL_SUFFIX}
	)